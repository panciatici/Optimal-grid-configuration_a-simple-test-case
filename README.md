You can find AMPL implementations using a MILP to solve the problem. 

Grid_MaxFlow_V(.run,.dat,.mod) without randomization and

Grid_MaxFlow_Vrandom(.run,.dat,.mod) with randomization
